#include "MiniStatAnalyst.h"
#include "MemoryFree.h"
#include "pgmStrToRAM.h" //SerialDebugger.println(freeMemory(), DEC);  // print how much RAM is available.


#if defined(ARDUINO_ARCH_SAMD)
  #define SerialDebugger SerialUSB
#else
  #define SerialDebugger Serial
#endif


MiniStatAnalyst analyst = MiniStatAnalyst();

const uint16_t num_array = 300;

//float amps[num_array] = {
//-23,
//-24,
//-25,
//-26,
//-27,
//-28,
//-29,
//-28,
//-29,
//-28,
//-30,
//-32,
//-29,
//-30,
//-29,
//-32,
//-32,
//-32,
//-33,
//-32,
//-34,
//-34,
//-33,
//-33,
//-32,
//-34,
//-36,
//-35,
//-34,
//-36,
//-36,
//-37,
//-36,
//-35,
//-36,
//-36,
//-37,
//-37,
//-38,
//-38,
//-38,
//-37,
//-39,
//-39,
//-39,
//-38,
//-39,
//-39,
//-41,
//-40,
//-42,
//-41,
//-41,
//-43,
//-43,
//-42,
//-44,
//-44,
//-44,
//-47,
//-46,
//-46,
//-46,
//-46,
//-48,
//-47,
//-48,
//-45,
//-49,
//-49,
//-49,
//-50,
//-50,
//-50,
//-50,
//-51,
//-59,
//-51,
//-50,
//-52,
//-53,
//-53,
//-53,
//-53,
//-53,
//-54,
//-55,
//-56,
//-54,
//-54,
//-56,
//-57,
//-55,
//-57,
//-57,
//-59,
//-58,
//-59,
//-57,
//-61,
//-61,
//-60,
//-62,
//-61,
//-63,
//-64,
//-64,
//-64,
//-66,
//-64,
//-66,
//-68,
//-66,
//-68,
//-67,
//-69,
//-70,
//-70,
//-71,
//-73,
//-73,
//-73,
//-75,
//-74,
//-74,
//-76,
//-77,
//-78,
//-76,
//-79,
//-82,
//-82,
//-83,
//-84,
//-84,
//-86,
//-87,
//-90,
//-87,
//-88,
//-91,
//-92,
//-92,
//-94,
//-92,
//-90,
//-92,
//-94,
//-93,
//-95,
//-95,
//-96,
//-96,
//-95,
//-96,
//-95,
//-95,
//-96,
//-98,
//-95,
//-94,
//-95,
//-94,
//-96,
//-97,
//-95,
//-95,
//-95,
//-96,
//-95,
//-95,
//-94,
//-94,
//-96,
//-95,
//-95,
//-94,
//-95,
//-95,
//-94,
//-95,
//-96,
//-96,
//-98,
//-98,
//-99,
//-99,
//-100,
//-99,
//-103,
//-102
//};
//
//
//int16_t volts[num_array] = {
//-44,
//-46,
//-48,
//-50,
//-52,
//-54,
//-56,
//-58,
//-60,
//-62,
//-64,
//-66,
//-68,
//-70,
//-72,
//-74,
//-76,
//-78,
//-80,
//-82,
//-84,
//-86,
//-88,
//-90,
//-92,
//-94,
//-96,
//-98,
//-100,
//-102,
//-104,
//-106,
//-108,
//-110,
//-112,
//-114,
//-116,
//-118,
//-120,
//-122,
//-124,
//-126,
//-128,
//-130,
//-132,
//-134,
//-136,
//-138,
//-140,
//-142,
//-144,
//-146,
//-148,
//-150,
//-152,
//-154,
//-156,
//-158,
//-160,
//-162,
//-164,
//-166,
//-168,
//-170,
//-172,
//-174,
//-176,
//-178,
//-180,
//-182,
//-184,
//-186,
//-188,
//-190,
//-192,
//-194,
//-196,
//-198,
//-200,
//-202,
//-204,
//-206,
//-208,
//-210,
//-212,
//-214,
//-216,
//-218,
//-220,
//-222,
//-224,
//-226,
//-228,
//-230,
//-232,
//-234,
//-236,
//-238,
//-240,
//-242,
//-244,
//-246,
//-248,
//-250,
//-252,
//-254,
//-256,
//-258,
//-260,
//-262,
//-264,
//-266,
//-268,
//-270,
//-272,
//-274,
//-276,
//-278,
//-280,
//-282,
//-284,
//-286,
//-288,
//-290,
//-292,
//-294,
//-296,
//-298,
//-300,
//-302,
//-304,
//-306,
//-308,
//-310,
//-312,
//-314,
//-316,
//-318,
//-320,
//-322,
//-324,
//-326,
//-328,
//-330,
//-332,
//-334,
//-336,
//-338,
//-340,
//-342,
//-344,
//-346,
//-348,
//-350,
//-352,
//-354,
//-356,
//-358,
//-360,
//-362,
//-364,
//-366,
//-368,
//-370,
//-372,
//-374,
//-376,
//-378,
//-380,
//-382,
//-384,
//-386,
//-388,
//-390,
//-392,
//-394,
//-396,
//-398,
//-400,
//-402,
//-404,
//-406,
//-408,
//-410,
//-412,
//-414,
//-416,
//-418,
//-420,
//-422,
//-424
//};


////MB
////2019-05-25-1649-MiniStatButtonCellRevA
//int16_t volts[num_array] = {
//-16,
//-18,
//-20,
//-22,
//-24,
//-26,
//-28,
//-30,
//-32,
//-34,
//-36,
//-38,
//-40,
//-42,
//-44,
//-46,
//-48,
//-50,
//-52,
//-54,
//-56,
//-58,
//-60,
//-62,
//-64,
//-66,
//-68,
//-70,
//-72,
//-74,
//-76,
//-78,
//-80,
//-82,
//-84,
//-86,
//-88,
//-90,
//-92,
//-94,
//-96,
//-98,
//-100,
//-102,
//-104,
//-106,
//-108,
//-110,
//-112,
//-114,
//-116,
//-118,
//-120,
//-122,
//-124,
//-126,
//-128,
//-130,
//-132,
//-134,
//-136,
//-138,
//-140,
//-142,
//-144,
//-146,
//-148,
//-150,
//-152,
//-154,
//-156,
//-158,
//-160,
//-162,
//-164,
//-166,
//-168,
//-170,
//-172,
//-174,
//-176,
//-178,
//-180,
//-182,
//-184,
//-186,
//-188,
//-190,
//-192,
//-194,
//-196,
//-198,
//-200,
//-202,
//-204,
//-206,
//-208,
//-210,
//-212,
//-214,
//-216,
//-218,
//-220,
//-222,
//-224,
//-226,
//-228,
//-230,
//-232,
//-234,
//-236,
//-238,
//-240,
//-242,
//-244,
//-246,
//-248,
//-250,
//-252,
//-254,
//-256,
//-258,
//-260,
//-262,
//-264,
//-266,
//-268,
//-270,
//-272,
//-274,
//-276,
//-278,
//-280,
//-282,
//-284,
//-286,
//-288,
//-290,
//-292,
//-294,
//-296,
//-298,
//-300,
//-302,
//-304,
//-306,
//-308,
//-310,
//-312,
//-314,
//-316,
//-318,
//-320,
//-322,
//-324,
//-326,
//-328,
//-330,
//-332,
//-334,
//-336,
//-338,
//-340,
//-342,
//-344,
//-346,
//-348,
//-350,
//-352,
//-354,
//-356,
//-358,
//-360,
//-362,
//-364,
//-366,
//-368,
//-370,
//-372,
//-374,
//-376,
//-378,
//-380,
//-382,
//-384,
//-386,
//-388,
//-390,
//-392,
//-394,
//-396,
//-398,
//-400
//};
//
//
////MB
////2019-05-25-1649-MiniStatButtonCellRevA
//float amps[num_array] = {
//-23.58,
//-32.81,
//-35.01,
//-38.7,
//-39.06,
//-42.01,
//-42,
//-41.99,
//-41.24,
//-41.5,
//-42.79,
//-41.86,
//-42.78,
//-41.48,
//-43.51,
//-41.84,
//-43.5,
//-42.94,
//-46.07,
//-47.36,
//-46.43,
//-44.4,
//-45.68,
//-44.76,
//-45.3,
//-45.85,
//-43.72,
//-46.58,
//-43.53,
//-45.65,
//-45.18,
//-46.57,
//-46.84,
//-45.64,
//-44.81,
//-45.45,
//-47.57,
//-46.74,
//-47.01,
//-46.18,
//-47.56,
//-46.73,
//-48.85,
//-48.39,
//-47.92,
//-48.2,
//-47.73,
//-50.22,
//-49.02,
//-50.77,
//-48.46,
//-50.95,
//-49.38,
//-51.13,
//-51.78,
//-52.05,
//-50.48,
//-51.49,
//-51.4,
//-50.64,
//-51.11,
//-50.34,
//-52.3,
//-49.45,
//-50.89,
//-50.63,
//-52.95,
//-52.18,
//-53.02,
//-52.39,
//-53.1,
//-53.57,
//-52.57,
//-54.76,
//-53.38,
//-53.49,
//-53.83,
//-54.67,
//-55.15,
//-56.22,
//-57.07,
//-57.18,
//-54.56,
//-56.14,
//-59.21,
//-55.84,
//-57.43,
//-57.17,
//-56.76,
//-57.24,
//-58.46,
//-57.31,
//-58.46,
//-58.97,
//-58.37,
//-57.76,
//-59.75,
//-59.89,
//-58.92,
//-61.64,
//-59.56,
//-62.29,
//-61.31,
//-63.3,
//-60.11,
//-63.94,
//-63.71,
//-62.74,
//-63.25,
//-62.64,
//-64.63,
//-64.03,
//-66.75,
//-65.04,
//-67.03,
//-64.95,
//-68.04,
//-67.07,
//-70.53,
//-69.19,
//-68.59,
//-70.21,
//-70.34,
//-72.33,
//-70.62,
//-73.71,
//-71.65,
//-75.45,
//-74.09,
//-74.57,
//-73.94,
//-78.11,
//-77.48,
//-77.22,
//-81.77,
//-79.66,
//-77.18,
//-81.73,
//-83.32,
//-82.32,
//-84.65,
//-83.28,
//-83.76,
//-87.93,
//-86.19,
//-88.89,
//-88.63,
//-90.22,
//-87.74,
//-90.07,
//-90.92,
//-90.29,
//-88.92,
//-91.25,
//-93.21,
//-91.84,
//-94.17,
//-94.28,
//-93.28,
//-93.58,
//-94.86,
//-92.95,
//-95.33,
//-96.98,
//-97.66,
//-96.35,
//-96.14,
//-97.56,
//-97.36,
//-98.64,
//-97.84,
//-101.7,
//-99.65,
//-100.7,
//-101.61,
//-101.4,
//-102.08,
//-104.1,
//-106.11,
//-106.79,
//-108.81,
//-110.82,
//-110.02,
//-109.82,
//-112.95,
//-112.89,
//-116.75,
//-116.18,
//-119.08,
//-121.09,
//-123.85,
//-123.42,
//-129.99
//};


//MB
//2019-05-24-1555-MiniStatButtonCellRevA
int16_t volts[] = {
-18,
-20,
-22,
-24,
-26,
-28,
-30,
-32,
-34,
-36,
-38,
-40,
-42,
-44,
-46,
-48,
-50,
-52,
-54,
-56,
-58,
-60,
-62,
-64,
-66,
-68,
-70,
-72,
-74,
-76,
-78,
-80,
-82,
-84,
-86,
-88,
-90,
-92,
-94,
-96,
-98,
-100,
-102,
-104,
-106,
-108,
-110,
-112,
-114,
-116,
-118,
-120,
-122,
-124,
-126,
-128,
-130,
-132,
-134,
-136,
-138,
-140,
-142,
-144,
-146,
-148,
-150,
-152,
-154,
-156,
-158,
-160,
-162,
-164,
-166,
-168,
-170,
-172,
-174,
-176,
-178,
-180,
-182,
-184,
-186,
-188,
-190,
-192,
-194,
-196,
-198,
-200,
-202,
-204,
-206,
-208,
-210,
-212,
-214,
-216,
-218,
-220,
-222,
-224,
-226,
-228,
-230,
-232,
-234,
-236,
-238,
-240,
-242,
-244,
-246,
-248,
-250,
-252,
-254,
-256,
-258,
-260,
-262,
-264,
-266,
-268,
-270,
-272,
-274,
-276,
-278,
-280,
-282,
-284,
-286,
-288,
-290,
-292,
-294,
-296,
-298,
-300,
-302,
-304,
-306,
-308,
-310,
-312,
-314,
-316,
-318,
-320,
-322,
-324,
-326,
-328,
-330,
-332,
-334,
-336,
-338,
-340,
-342,
-344,
-346,
-348,
-350,
-352,
-354,
-356,
-358,
-360,
-362,
-364,
-366,
-368,
-370,
-372,
-374,
-376,
-378,
-380,
-382,
-384,
-386,
-388,
-390,
-392,
-394,
-396,
-398,
-400,
-402,
-404,
-406,
-408,
-410,
-412,
-414,
-416,
-418,
-420,
-422,
-424,
-426,
-428,
-430,
-432,
-434,
-436,
-438,
-440,
-442,
-444,
-446,
-448,
-450
};


//MB
//2019-05-24-1555-MiniStatButtonCellRevA
float amps[] = {
-12.11,
-15.42,
-17.26,
-19.47,
-20.94,
-19.08,
-22.4,
-20.91,
-21.17,
-20.24,
-22.64,
-21.34,
-24.85,
-22.07,
-24.84,
-23.54,
-24.83,
-26.48,
-25.55,
-26.84,
-25.54,
-27.94,
-27.75,
-29.41,
-28.48,
-28.19,
-27.36,
-26.15,
-27.54,
-28.92,
-29.94,
-30.21,
-30.85,
-30.76,
-31.03,
-31.68,
-32.32,
-32.6,
-32.87,
-32.41,
-32.31,
-32.96,
-33.23,
-34.99,
-33.04,
-35.53,
-34.33,
-35.34,
-33.03,
-37,
-35.8,
-36.81,
-37.09,
-38.1,
-37.64,
-36.43,
-38.56,
-37.35,
-38.81,
-37.44,
-39.25,
-38.25,
-38.36,
-39.8,
-39.91,
-39.28,
-39.98,
-41.94,
-40.93,
-42.01,
-40.64,
-42.22,
-41.82,
-42.3,
-42.03,
-43.11,
-43.58,
-42.95,
-44.03,
-42.65,
-44.61,
-44.95,
-44.68,
-43.31,
-45.86,
-46.34,
-46.82,
-46.04,
-46.52,
-46.26,
-47.33,
-46.63,
-47.51,
-49.13,
-48.15,
-49.4,
-48.06,
-49.31,
-49.44,
-49.95,
-49.72,
-49.86,
-51.84,
-49.02,
-52.49,
-50.03,
-51.65,
-51.79,
-53.77,
-50.95,
-68.09,
-53.08,
-53.95,
-54.46,
-54.6,
-54.37,
-54.87,
-56.86,
-57.37,
-56.76,
-56.53,
-57.04,
-56.44,
-57.68,
-57.82,
-57.97,
-59.19,
-59.3,
-61.63,
-60.26,
-61.11,
-61.22,
-62.44,
-64.77,
-63.77,
-63.14,
-64.36,
-65.94,
-66.05,
-68.01,
-67.01,
-68.97,
-67.23,
-70.3,
-69.67,
-73.11,
-73.96,
-74.81,
-74.18,
-75.76,
-78.09,
-77.46,
-85.33,
-81.01,
-81.49,
-80.49,
-83.19,
-81.82,
-83.6,
-84.14,
-85.92,
-86.09,
-88.11,
-87.31,
-87.11,
-87.27,
-86.47,
-89.97,
-88.29,
-88.97,
-92.09,
-87.45,
-87.39,
-89.41,
-87.73,
-82.86,
-88.94,
-88.74,
-88.31,
-87.74,
-88.65,
-88.22,
-88.01,
-85.22,
-87.75,
-86.44,
-89.57,
-89.14,
-87.82,
-90.21,
-87.56,
-91.55,
-89.55,
-91.26,
-91.48,
-92.3,
-93.64,
-92.75,
-94.68,
-93.06,
-94.02,
-94.25,
-98.03,
-96.03,
-99.96,
-98.19,
-101.37,
-99.01,
-101.82,
-103.01,
-102.87,
-103.83,
-105.76,
-107.47,
-106.95,
-108.28,
-107.63
};


////FeCN
////2019-04-09-1741-MiniStatButtonCellRevA
//int16_t volts[] = {
//450,
//445,
//440,
//435,
//430,
//425,
//420,
//415,
//410,
//405,
//400,
//395,
//390,
//385,
//380,
//375,
//370,
//365,
//360,
//355,
//350,
//345,
//340,
//335,
//330,
//325,
//320,
//315,
//310,
//305,
//300,
//295,
//290,
//285,
//280,
//275,
//270,
//265,
//260,
//255,
//250,
//245,
//240,
//235,
//230,
//225,
//220,
//215,
//210,
//205,
//200,
//195,
//190,
//185,
//180,
//175,
//170,
//165,
//160,
//155,
//150,
//145,
//140,
//135,
//130,
//125,
//120,
//115,
//110,
//105,
//100,
//95,
//90,
//85,
//80,
//75,
//70,
//65,
//60,
//55,
//50,
//45,
//40,
//35,
//30,
//25,
//20,
//15,
//10,
//5,
//0,
//-5,
//-10,
//-15,
//-20,
//-25,
//-30,
//-35,
//-40,
//-45,
//-50,
//-55,
//-60,
//-65,
//-70,
//-75,
//-80,
//-85,
//-90,
//-95,
//-100,
//-105,
//-110,
//-115,
//-120,
//-125,
//-130,
//-135,
//-140,
//-145,
//-150,
//-155,
//-160,
//-165,
//-170,
//-175,
//-180,
//-185,
//-190,
//-195,
//-200,
//-195,
//-190,
//-185,
//-180,
//-175,
//-170,
//-165,
//-160,
//-155,
//-150,
//-145,
//-140,
//-135,
//-130,
//-125,
//-120,
//-115,
//-110,
//-105,
//-100,
//-95,
//-90,
//-85,
//-80,
//-75,
//-70,
//-65,
//-60,
//-55,
//-50,
//-45,
//-40,
//-35,
//-30,
//-25,
//-20,
//-15,
//-10,
//-5,
//0,
//-5,
//0,
//5,
//10,
//15,
//20,
//25,
//30,
//35,
//40,
//45,
//50,
//55,
//60,
//65,
//70,
//75,
//80,
//85,
//90,
//95,
//100,
//105,
//110,
//115,
//120,
//125,
//130,
//135,
//140,
//145,
//150,
//155,
//160,
//165,
//170,
//175,
//180,
//185,
//190,
//195,
//200,
//205,
//210,
//215,
//220,
//225,
//230,
//235,
//240,
//245,
//250,
//255,
//260,
//265,
//270,
//275,
//280,
//285,
//290,
//295,
//300,
//305,
//310,
//315,
//320,
//325,
//330,
//335,
//340,
//345,
//350,
//355,
//360,
//365,
//370,
//375,
//380,
//385,
//390,
//395,
//400,
//405,
//410,
//415,
//420,
//425,
//430,
//435,
//440,
//445
//};
//
//
////FeCN
////2019-04-09-1741-MiniStatButtonCellRevA
//float amps[] = {
//3.126428571,
//2.902142857,
//2.561428571,
//2.475,
//2.367142857,
//2.258571429,
//2.15,
//2.296428571,
//2.188571429,
//2.08,
//2.052142857,
//1.828571429,
//1.840714286,
//1.772142857,
//1.704285714,
//1.948571429,
//1.647857143,
//1.637857143,
//1.766428571,
//1.814285714,
//1.92,
//1.641428571,
//1.457142857,
//1.795714286,
//1.565,
//1.492142857,
//1.302857143,
//1.520714286,
//1.331428571,
//1.2,
//1.301428571,
//1.17,
//1.271428571,
//1.082142857,
//1.125714286,
//1.227142857,
//1.27,
//0.904285714,
//1.201428571,
//0.663571429,
//0.554285714,
//0.713571429,
//0.372142857,
//0.124285714,
//-0.332857143,
//-0.290714286,
//-0.573571429,
//-1.053571429,
//-1.220714286,
//-2.049285714,
//-2.565,
//-2.806428571,
//-3.581428571,
//-4.218571429,
//-5.087857143,
//-6.095714286,
//-7.022857143,
//-7.950714286,
//-9.190714286,
//-10.06,
//-11.39428571,
//-12.51785714,
//-13.38714286,
//-14.43071429,
//-15.41071429,
//-16.46428571,
//-16.87928571,
//-17.58428571,
//-18.28928571,
//-18.29785714,
//-18.88714286,
//-18.77928571,
//-18.96142857,
//-19.08571429,
//-18.92,
//-18.46357143,
//-18.18142857,
//-18.02428571,
//-17.86642857,
//-17.47642857,
//-17.14428571,
//-16.69642857,
//-16.59642857,
//-15.8,
//-15.65928571,
//-15.34357143,
//-14.91214286,
//-14.53857143,
//-13.84142857,
//-13.435,
//-13.84142857,
//-13.78357143,
//-13.20285714,
//-12.68,
//-12.93714286,
//-12.38142857,
//-12.52285714,
//-12.08214286,
//-12.00785714,
//-12.04928571,
//-11.56857143,
//-11.49357143,
//-11.47714286,
//-11.34428571,
//-10.68857143,
//-10.85428571,
//-10.73,
//-10.43142857,
//-10.365,
//-10.58928571,
//-10.05785714,
//-10.22428571,
//-10.21571429,
//-10.38214286,
//-9.909285714,
//-9.668571429,
//-9.485714286,
//-9.61,
//-9.553571429,
//-9.555714286,
//-9.302857143,
//-9.247142857,
//-9.307142857,
//-9.286428571,
//-9.172142857,
//-8.942142857,
//-9.037857143,
//-8.923571429,
//-8.867142857,
//-8.788571429,
//-8.722142857,
//-8.498571429,
//-8.460714286,
//-8.400714286,
//-8.108571429,
//-7.78,
//-8.068571429,
//-8.008571429,
//-7.912857143,
//-7.736428571,
//-7.502142857,
//-7.406428571,
//-7.346428571,
//-7.577142857,
//-7.162142857,
//-7.402857143,
//-7.411428571,
//-7.129285714,
//-7.079285714,
//-7.029285714,
//-7.037857143,
//-6.697142857,
//-7.112142857,
//-6.83,
//-6.954285714,
//-6.788571429,
//-6.564285714,
//-6.64,
//-6.482142857,
//-6.556428571,
//-6.572857143,
//-6.473571429,
//-6.547857143,
//-6.157857143,
//-6.307857143,
//-6.108571429,
//-6.025,
//-5.651428571,
//-5.825714286,
//-5.651428571,
//-5.477142857,
//-5.825714286,
//-5.535,
//-5.128571429,
//-5.128571429,
//-5.419285714,
//-5.27,
//-5.237142857,
//-4.971428571,
//-4.589285714,
//-4.805,
//-4.672857143,
//-4.249285714,
//-4.117142857,
//-3.81,
//-3.561428571,
//-3.021428571,
//-2.722857143,
//-2.249285714,
//-1.718571429,
//-1.187857143,
//-0.307857143,
//-0.009285714,
//0.986428571,
//1.633571429,
//2.512857143,
//3.625,
//4.33,
//5.442142857,
//6.479285714,
//7.581428571,
//8.566428571,
//9.458571429,
//10.73428571,
//11.54571429,
//12.43714286,
//13.13214286,
//13.76928571,
//13.96357143,
//14.65928571,
//14.88928571,
//15.02571429,
//15.03428571,
//14.96928571,
//15.04285714,
//14.80357143,
//14.35428571,
//14.17285714,
//13.54928571,
//13.19357143,
//12.86,
//12.44642857,
//12.055,
//11.7,
//11.30857143,
//11.06928571,
//10.73785714,
//10.52071429,
//10.245,
//10.02714286,
//9.693571429,
//9.07,
//9.026428571,
//8.867142857,
//8.882142857,
//8.374285714,
//8.215,
//7.997857143,
//8.012857143,
//7.72,
//7.382142857,
//7.45,
//7.147857143,
//7.157857143,
//6.993571429,
//6.807142857,
//6.759285714,
//6.362857143,
//6.525,
//6.245,
//6.312857143,
//5.894285714,
//6.117857143,
//6.03,
//6.08,
//5.897857143,
//5.751428571,
//5.86,
//5.561428571,
//5.321428571,
//5.232857143,
//5.457857143
//};


unsigned long time1 = 0;
unsigned long time2 = 0;
unsigned long time3 = 0;
unsigned long time4 = 0;
unsigned long dt = 0;


float slope = 0;
float intercept = 0;
float current = 0;


void setup()
{
  SerialDebugger.begin(115200);
  while(!SerialDebugger);


  time1 = millis();
  uint16_t errorCode = analyst.calcBaseline(MB_APTAMER_BASE, amps, volts, slope, intercept, num_array);  
  //uint16_t errorCode = analyst.calcBaseline(FeCN_RED_BASE, amps, volts, slope, intercept, num_array);
  time2 = millis();
  dt = time2-time1;
  SerialDebugger.print("dt = ");
  SerialDebugger.println(dt);
  printErrorCode(errorCode);
  printSlopeAndIntercept();


  time1 = millis();
  current = analyst.getPeakCurrent(MB_APTAMER_PEAK, amps, volts, slope, intercept, num_array);
  //current = analyst.getPeakCurrent(FeCN_RED_PEAK, amps, volts, slope, intercept, num_array);
  time2 = millis();
  dt = time2-time1;
  SerialDebugger.print("dt = ");
  SerialDebugger.println(dt);
  printCurrent();


//  time1 = millis();
//  errorCode = analyst.calcBaseline(FeCN_OX_BASE, amps, volts, slope, intercept, num_array);
//  time2 = millis();
//  dt = time2-time1;
//  SerialDebugger.print("dt = ");
//  SerialDebugger.println(dt);
//  printErrorCode(errorCode);
//  printSlopeAndIntercept();
//
//  time1 = millis();
//  current = analyst.getPeakCurrent(FeCN_OX_PEAK, amps, volts, slope, intercept, num_array);
//  time2 = millis();
//  dt = time2-time1;
//  SerialDebugger.print("dt = ");
//  SerialDebugger.println(dt);
//  printCurrent();
  
}

void printErrorCode(uint16_t code)
{
  SerialDebugger.print("Error code: ");
  SerialDebugger.println(code);
}

void printSlopeAndIntercept()
{
  SerialDebugger.print("slope: ");
  SerialDebugger.print(slope,4);
  SerialDebugger.print(", ");
  SerialDebugger.print("intercept: ");
  SerialDebugger.print(intercept,4);
  SerialDebugger.println();
}

void printCurrent()
{
  SerialDebugger.print("current: ");
  SerialDebugger.print(current);
  SerialDebugger.println();
}

void loop()
{
}
